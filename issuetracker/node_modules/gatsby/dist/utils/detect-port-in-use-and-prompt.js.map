{"version":3,"sources":["../../src/utils/detect-port-in-use-and-prompt.js"],"names":["detectPort","require","report","readlinePort","port","rlInterface","question","Promise","resolve","answer","length","match","detectPortInUseAndPrompt","foundPort","detectedPort","catch","err","panic","module","exports"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAE,aAAF,CAA1B;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAE,yBAAF,CAAtB;;AAEA,MAAME,YAAY,GAAG,CAACC,IAAD,EAAOC,WAAP,KAAuB;AAC1C,QAAMC,QAAQ,GAAI,wCAAuCF,IAAK,kEAA9D;AACA,SAAO,IAAIG,OAAJ,CAAYC,OAAO,IAAI;AAC5BH,IAAAA,WAAW,CAACC,QAAZ,CAAqBA,QAArB,EAA+BG,MAAM,IAAI;AACvCD,MAAAA,OAAO,CAACC,MAAM,CAACC,MAAP,KAAkB,CAAlB,IAAuBD,MAAM,CAACE,KAAP,CAAa,UAAb,CAAxB,CAAP;AACD,KAFD;AAGD,GAJM,CAAP;AAKD,CAPD;;AASA,MAAMC,wBAAwB,GAAG,OAAOR,IAAP,EAAaC,WAAb,KAA6B;AAC5D,MAAIQ,SAAS,GAAGT,IAAhB;AACA,QAAMU,YAAY,GAAG,MAAMd,UAAU,CAACI,IAAD,CAAV,CAAiBW,KAAjB,CAAuBC,GAAG,IAAId,MAAM,CAACe,KAAP,CAAaD,GAAb,CAA9B,CAA3B;;AACA,MAAIZ,IAAI,KAAKU,YAAb,EAA2B;AACzB,QAAI,MAAMX,YAAY,CAACC,IAAD,EAAOC,WAAP,CAAtB,EAA2C;AACzCQ,MAAAA,SAAS,GAAGC,YAAZ;AACD;AACF;;AACD,SAAOD,SAAP;AACD,CATD;;AAWAK,MAAM,CAACC,OAAP,GAAiBP,wBAAjB","sourcesContent":["const detectPort = require(`detect-port`)\nconst report = require(`gatsby-cli/lib/reporter`)\n\nconst readlinePort = (port, rlInterface) => {\n  const question = `Something is already running at port ${port} \\nWould you like to run the app at another port instead? [Y/n] `\n  return new Promise(resolve => {\n    rlInterface.question(question, answer => {\n      resolve(answer.length === 0 || answer.match(/^yes|y$/i))\n    })\n  })\n}\n\nconst detectPortInUseAndPrompt = async (port, rlInterface) => {\n  let foundPort = port\n  const detectedPort = await detectPort(port).catch(err => report.panic(err))\n  if (port !== detectedPort) {\n    if (await readlinePort(port, rlInterface)) {\n      foundPort = detectedPort\n    }\n  }\n  return foundPort\n}\n\nmodule.exports = detectPortInUseAndPrompt\n"],"file":"detect-port-in-use-and-prompt.js"}